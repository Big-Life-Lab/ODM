<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1824px" preserveAspectRatio="none" style="width:1994px;height:1824px;background:#FFFFFF;" version="1.1" viewBox="0 0 1994 1824" width="1994px" zoomAndPan="magnify"><defs><filter height="300%" id="fr00gnjof84tr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="1025.75" cy="20" fill="#000000" filter="url(#fr00gnjof84tr)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="50.1875" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="129" x="961.25" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="109" x="971.25" y="72.457">Create list of tables:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81" x="985.25" y="87.5508">"table_names"</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="50.1875" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="180" x="935.75" y="120.1875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="160" x="945.75" y="142.6445">Create list of access groups :</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="1001.25" y="157.7383">"org_list"</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="50.1875" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="349" x="851.25" y="190.375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="329" x="861.25" y="212.832">Load user data and Create dictionary of pandas dataframes:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="32" x="1009.75" y="227.9258">"data"</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="310" x="870.75" y="260.5625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="290" x="880.75" y="283.0195">Filter "data" using primary and foreign key constraints</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="183" x="932.75" y="298.1133">into new dictionary of dataframes:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="74" x="988.75" y="313.207">"new_df_dict"</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="50.1875" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="168" x="941.75" y="345.8438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="148" x="951.75" y="368.3008">Create a list of dataframes:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71" x="990.25" y="383.3945">"access_list"</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="262" x="894.75" y="416.0313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="242" x="904.75" y="438.4883">Load user schema into a Pandas dataframe</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="302" x="874.75" y="471.125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="282" x="884.75" y="493.582">Convert schema dataframe into wide table structure</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="336" x="857.75" y="526.2188"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="306" x="872.75" y="548.6758">Create columns for sharing properties for organizations:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="313" x="867.75" y="563.7695">"shared_with_label" where label = "name of organization"</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="126" x="962.75" y="578.8633">with True/ False values</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="326" x="862.75" y="611.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="306" x="872.75" y="633.957">Create columns for sharing properties for organizations:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="264" x="892.25" y="649.0508">"filter_label" where label = "name of organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130" x="960.75" y="664.1445">with True/ False values"</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="50.1875" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="262" x="894.75" y="696.7813"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="242" x="904.75" y="719.2383">Create a list of dictionaries from the schema</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="125" x="963.25" y="734.332">specifying rules to filter</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="177" x="937.25" y="766.9688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157" x="947.25" y="789.4258">Filter data based on schema</text><polygon fill="#FEFECE" filter="url(#fr00gnjof84tr)" points="1025.75,822.0625,1025.75,822.0625,1037.75,834.0625,1025.75,846.0625,1025.75,846.0625,1013.75,834.0625,1025.75,822.0625" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="139" x="874.75" y="831.6455">schema['direction'] = 'column'</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="160" x="1037.75" y="831.6455">) then (schema['direction'] = 'row'</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="271" x="387.5" y="856.0625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="251" x="397.5" y="878.5195">Filter columns/ variables for each organization</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="304" x="371" y="911.1563"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="284" x="381" y="933.6133">Create a list keep_var that contains lists of variables</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="228" x="409" y="948.707">to keep for each table &amp; each organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99" x="473.5" y="963.8008">within nested lists</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="239" x="403.5" y="1011.4375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="219" x="413.5" y="1033.8945">Loop over each organization in "org_list"</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="257" x="394.5" y="1081.5313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="237" x="404.5" y="1103.9883">Loop over each tables in "table_names" list</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="50.1875" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="228" x="409" y="1151.625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="208" x="419" y="1174.082">Create an temporary list for each table</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141" x="452.5" y="1189.1758">consisting of it's variables</text><polygon fill="#FEFECE" filter="url(#fr00gnjof84tr)" points="127,1261.8125,127,1261.8125,139,1273.8125,127,1285.8125,127,1285.8125,115,1273.8125,127,1261.8125" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="125" x="131" y="1297.2314">"share_with_label" = True</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="232" x="11" y="1319.6484"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="135" x="59.5" y="1342.1055">Keep the variable  inside</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="106" x="72.5" y="1357.1992">keep_var list for the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="212" x="21" y="1372.293">current table &amp; organization in itteration</text><polygon fill="#FEFECE" filter="url(#fr00gnjof84tr)" points="382,1261.8125,382,1261.8125,394,1273.8125,382,1285.8125,382,1285.8125,370,1273.8125,382,1261.8125" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="407" x="386" y="1297.2314">"shared_with_label" = False and schema['filter_label'] = 'ALL' and direction = 'column'</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="343" x="394" y="1271.3955">) then ("shared_with_label" = False and schema['variableName'] = 'ALL'</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="232" x="266" y="1319.6484"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="140" x="312" y="1342.1055">Remove the variable from</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="106" x="327.5" y="1357.1992">keep_var list for the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="212" x="276" y="1372.293">current table &amp; organization in itteration</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="232" x="803" y="1315.7305"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="156" x="841" y="1338.1875">Remove all the variable from</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="106" x="864.5" y="1353.2813">keep_var list for the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="212" x="813" y="1368.375">current table &amp; organization in itteration</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="174" x="436" y="1444.9297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141" x="452.5" y="1467.3867">Loop over the nested lists</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="154" x="446" y="1482.4805">for each organization inside:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71" x="487.5" y="1497.5742">"access_list"</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="225" x="410.5" y="1530.2109"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="205" x="420.5" y="1552.668">Filter dataframes in `access_list` with</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="126" x="458.5" y="1567.7617">keep_var variables that</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="172" x="437" y="1582.8555">corresponds to each dataframe</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="254" x="1397.5" y="856.0625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="234" x="1407.5" y="878.5195">Filter rows in the data for each organization</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="239" x="1405" y="911.1563"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="219" x="1415" y="933.6133">Loop over each organization in "org_list"</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="389" x="1330" y="981.25"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="369" x="1340" y="1003.707">Loop over the nested lists for each organization inside "access_list"</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="257" x="1396" y="1051.3438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="237" x="1406" y="1073.8008">Loop over each tables in "table_names" list</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="371" x="1339" y="1121.4375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="351" x="1349" y="1143.8945">Loop over the dataframes inside the nested lists in "access_list"</text><polygon fill="#FEFECE" filter="url(#fr00gnjof84tr)" points="1157,1216.5313,1157,1216.5313,1169,1228.5313,1157,1240.5313,1157,1240.5313,1145,1228.5313,1157,1216.5313" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="1161" y="1251.9502">"filter_label"= [a,b]</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="204" x="1055" y="1274.3672"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="184" x="1065" y="1296.8242">Remove all values for the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="181" x="1065" y="1311.918">within the range between a and b</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121" x="1096.5" y="1327.0117">including both a and b</text><polygon fill="#FEFECE" filter="url(#fr00gnjof84tr)" points="1371,1216.5313,1371,1216.5313,1383,1228.5313,1371,1240.5313,1371,1240.5313,1359,1228.5313,1371,1216.5313" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="1375" y="1251.9502">"filter_label" = (a,b]</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="204" x="1269" y="1274.3672"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="184" x="1279" y="1296.8242">Remove all values for the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="181" x="1279" y="1311.918">within the range between a and b</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="1296.5" y="1327.0117">excluding a and including b</text><polygon fill="#FEFECE" filter="url(#fr00gnjof84tr)" points="1595,1216.5313,1595,1216.5313,1607,1228.5313,1595,1240.5313,1595,1240.5313,1583,1228.5313,1595,1216.5313" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="1599" y="1251.9502">"filter_label" = [a,b)</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="204" x="1493" y="1274.3672"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="184" x="1503" y="1296.8242">Remove all values for the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="181" x="1503" y="1311.918">within the range between a and b</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="1520.5" y="1327.0117">including a and excluding b</text><polygon fill="#FEFECE" filter="url(#fr00gnjof84tr)" points="1835.5,1216.5313,1835.5,1216.5313,1847.5,1228.5313,1835.5,1240.5313,1835.5,1240.5313,1823.5,1228.5313,1835.5,1216.5313" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="92" x="1839.5" y="1251.9502">"filter_label" = (a,b)</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="237" x="1717" y="1274.3672"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="1785" y="1296.8242">Remove all values</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="170" x="1749" y="1311.918">for the variable within the range</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="217" x="1727" y="1327.0117">between a and b excluding both a and b</text><polygon fill="#FEFECE" filter="url(#fr00gnjof84tr)" points="1025.75,1601.4922,1037.75,1613.4922,1025.75,1625.4922,1013.75,1613.4922,1025.75,1601.4922" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="195" x="928.25" y="1645.4922"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="175" x="938.25" y="1667.9492">Return list of filtered dataframes</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="965.75" y="1683.043">for each organization:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="68" x="991.75" y="1698.1367">"filtered_list"</text><rect fill="#FEFECE" filter="url(#fr00gnjof84tr)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="235" x="908.25" y="1730.7734"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="215" x="918.25" y="1753.2305">Return a text document with description</text><ellipse cx="1025.75" cy="1796.8672" fill="#FFFFFF" filter="url(#fr00gnjof84tr)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="1025.75" cy="1796.8672" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="30" y2="50"/><polygon fill="#A80036" points="1021.75,40,1025.75,50,1029.75,40,1025.75,44" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="100.1875" y2="120.1875"/><polygon fill="#A80036" points="1021.75,110.1875,1025.75,120.1875,1029.75,110.1875,1025.75,114.1875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="170.375" y2="190.375"/><polygon fill="#A80036" points="1021.75,180.375,1025.75,190.375,1029.75,180.375,1025.75,184.375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="240.5625" y2="260.5625"/><polygon fill="#A80036" points="1021.75,250.5625,1025.75,260.5625,1029.75,250.5625,1025.75,254.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="325.8438" y2="345.8438"/><polygon fill="#A80036" points="1021.75,335.8438,1025.75,345.8438,1029.75,335.8438,1025.75,339.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="396.0313" y2="416.0313"/><polygon fill="#A80036" points="1021.75,406.0313,1025.75,416.0313,1029.75,406.0313,1025.75,410.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="451.125" y2="471.125"/><polygon fill="#A80036" points="1021.75,461.125,1025.75,471.125,1029.75,461.125,1025.75,465.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="506.2188" y2="526.2188"/><polygon fill="#A80036" points="1021.75,516.2188,1025.75,526.2188,1029.75,516.2188,1025.75,520.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="591.5" y2="611.5"/><polygon fill="#A80036" points="1021.75,601.5,1025.75,611.5,1029.75,601.5,1025.75,605.5" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="676.7813" y2="696.7813"/><polygon fill="#A80036" points="1021.75,686.7813,1025.75,696.7813,1029.75,686.7813,1025.75,690.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="746.9688" y2="766.9688"/><polygon fill="#A80036" points="1021.75,756.9688,1025.75,766.9688,1029.75,756.9688,1025.75,760.9688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="523" x2="523" y1="891.1563" y2="911.1563"/><polygon fill="#A80036" points="519,901.1563,523,911.1563,527,901.1563,523,905.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="523" x2="523" y1="976.4375" y2="1011.4375"/><polygon fill="#A80036" points="519,1001.4375,523,1011.4375,527,1001.4375,523,1005.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="523" x2="523" y1="1046.5313" y2="1081.5313"/><polygon fill="#A80036" points="519,1071.5313,523,1081.5313,527,1071.5313,523,1075.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="523" x2="523" y1="1116.625" y2="1151.625"/><polygon fill="#A80036" points="519,1141.625,523,1151.625,527,1141.625,523,1145.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="127" x2="127" y1="1285.8125" y2="1319.6484"/><polygon fill="#A80036" points="123,1309.6484,127,1319.6484,131,1309.6484,127,1313.6484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="127" x2="127" y1="1384.9297" y2="1424.9297"/><polygon fill="#A80036" points="123,1414.9297,127,1424.9297,131,1414.9297,127,1418.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="382" x2="382" y1="1285.8125" y2="1319.6484"/><polygon fill="#A80036" points="378,1309.6484,382,1319.6484,386,1309.6484,382,1313.6484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="382" x2="382" y1="1384.9297" y2="1424.9297"/><polygon fill="#A80036" points="378,1414.9297,382,1424.9297,386,1414.9297,382,1418.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="139" x2="370" y1="1273.8125" y2="1273.8125"/><polygon fill="#A80036" points="360,1269.8125,370,1273.8125,360,1277.8125,364,1273.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="523" x2="523" y1="1201.8125" y2="1236.8125"/><line style="stroke:#A80036;stroke-width:1.5;" x1="523" x2="127" y1="1236.8125" y2="1236.8125"/><line style="stroke:#A80036;stroke-width:1.5;" x1="127" x2="127" y1="1236.8125" y2="1261.8125"/><polygon fill="#A80036" points="123,1251.8125,127,1261.8125,131,1251.8125,127,1255.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="394" x2="919" y1="1273.8125" y2="1273.8125"/><line style="stroke:#A80036;stroke-width:1.5;" x1="919" x2="919" y1="1273.8125" y2="1315.7305"/><polygon fill="#A80036" points="915,1305.7305,919,1315.7305,923,1305.7305,919,1309.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="919" x2="919" y1="1381.0117" y2="1424.9297"/><polygon fill="#A80036" points="915,1414.9297,919,1424.9297,923,1414.9297,919,1418.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="127" x2="919" y1="1424.9297" y2="1424.9297"/><line style="stroke:#A80036;stroke-width:1.5;" x1="523" x2="523" y1="1424.9297" y2="1444.9297"/><polygon fill="#A80036" points="519,1434.9297,523,1444.9297,527,1434.9297,523,1438.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="523" x2="523" y1="1510.2109" y2="1530.2109"/><polygon fill="#A80036" points="519,1520.2109,523,1530.2109,527,1520.2109,523,1524.2109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1524.5" x2="1524.5" y1="891.1563" y2="911.1563"/><polygon fill="#A80036" points="1520.5,901.1563,1524.5,911.1563,1528.5,901.1563,1524.5,905.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1524.5" x2="1524.5" y1="946.25" y2="981.25"/><polygon fill="#A80036" points="1520.5,971.25,1524.5,981.25,1528.5,971.25,1524.5,975.25" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1524.5" x2="1524.5" y1="1016.3438" y2="1051.3438"/><polygon fill="#A80036" points="1520.5,1041.3438,1524.5,1051.3438,1528.5,1041.3438,1524.5,1045.3438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1524.5" x2="1524.5" y1="1086.4375" y2="1121.4375"/><polygon fill="#A80036" points="1520.5,1111.4375,1524.5,1121.4375,1528.5,1111.4375,1524.5,1115.4375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1157" x2="1157" y1="1240.5313" y2="1274.3672"/><polygon fill="#A80036" points="1153,1264.3672,1157,1274.3672,1161,1264.3672,1157,1268.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1157" x2="1157" y1="1339.6484" y2="1404.9297"/><polygon fill="#A80036" points="1153,1394.9297,1157,1404.9297,1161,1394.9297,1157,1398.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1371" x2="1371" y1="1240.5313" y2="1274.3672"/><polygon fill="#A80036" points="1367,1264.3672,1371,1274.3672,1375,1264.3672,1371,1268.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1371" x2="1371" y1="1339.6484" y2="1404.9297"/><polygon fill="#A80036" points="1367,1394.9297,1371,1404.9297,1375,1394.9297,1371,1398.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1595" x2="1595" y1="1240.5313" y2="1274.3672"/><polygon fill="#A80036" points="1591,1264.3672,1595,1274.3672,1599,1264.3672,1595,1268.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1595" x2="1595" y1="1339.6484" y2="1404.9297"/><polygon fill="#A80036" points="1591,1394.9297,1595,1404.9297,1599,1394.9297,1595,1398.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1835.5" x2="1835.5" y1="1240.5313" y2="1274.3672"/><polygon fill="#A80036" points="1831.5,1264.3672,1835.5,1274.3672,1839.5,1264.3672,1835.5,1268.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1835.5" x2="1835.5" y1="1339.6484" y2="1404.9297"/><polygon fill="#A80036" points="1831.5,1394.9297,1835.5,1404.9297,1839.5,1394.9297,1835.5,1398.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1169" x2="1359" y1="1228.5313" y2="1228.5313"/><polygon fill="#A80036" points="1349,1224.5313,1359,1228.5313,1349,1232.5313,1353,1228.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1383" x2="1583" y1="1228.5313" y2="1228.5313"/><polygon fill="#A80036" points="1573,1224.5313,1583,1228.5313,1573,1232.5313,1577,1228.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1607" x2="1823.5" y1="1228.5313" y2="1228.5313"/><polygon fill="#A80036" points="1813.5,1224.5313,1823.5,1228.5313,1813.5,1232.5313,1817.5,1228.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1524.5" x2="1524.5" y1="1156.5313" y2="1191.5313"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1524.5" x2="1157" y1="1191.5313" y2="1191.5313"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1157" x2="1157" y1="1191.5313" y2="1216.5313"/><polygon fill="#A80036" points="1153,1206.5313,1157,1216.5313,1161,1206.5313,1157,1210.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1847.5" x2="1968" y1="1228.5313" y2="1228.5313"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1968" x2="1968" y1="1228.5313" y2="1404.9297"/><polygon fill="#A80036" points="1964,1394.9297,1968,1404.9297,1972,1394.9297,1968,1398.9297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1157" x2="1968" y1="1404.9297" y2="1404.9297"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1013.75" x2="523" y1="834.0625" y2="834.0625"/><line style="stroke:#A80036;stroke-width:1.5;" x1="523" x2="523" y1="834.0625" y2="856.0625"/><polygon fill="#A80036" points="519,846.0625,523,856.0625,527,846.0625,523,850.0625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1037.75" x2="1524.5" y1="834.0625" y2="834.0625"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1524.5" x2="1524.5" y1="834.0625" y2="856.0625"/><polygon fill="#A80036" points="1520.5,846.0625,1524.5,856.0625,1528.5,846.0625,1524.5,850.0625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="523" x2="523" y1="1595.4922" y2="1613.4922"/><line style="stroke:#A80036;stroke-width:1.5;" x1="523" x2="1013.75" y1="1613.4922" y2="1613.4922"/><polygon fill="#A80036" points="1003.75,1609.4922,1013.75,1613.4922,1003.75,1617.4922,1007.75,1613.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1524.5" x2="1524.5" y1="1404.9297" y2="1613.4922"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1524.5" x2="1037.75" y1="1613.4922" y2="1613.4922"/><polygon fill="#A80036" points="1047.75,1609.4922,1037.75,1613.4922,1047.75,1617.4922,1043.75,1613.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="802.0625" y2="822.0625"/><polygon fill="#A80036" points="1021.75,812.0625,1025.75,822.0625,1029.75,812.0625,1025.75,816.0625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="1625.4922" y2="1645.4922"/><polygon fill="#A80036" points="1021.75,1635.4922,1025.75,1645.4922,1029.75,1635.4922,1025.75,1639.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="1710.7734" y2="1730.7734"/><polygon fill="#A80036" points="1021.75,1720.7734,1025.75,1730.7734,1029.75,1720.7734,1025.75,1724.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1025.75" x2="1025.75" y1="1765.8672" y2="1785.8672"/><polygon fill="#A80036" points="1021.75,1775.8672,1025.75,1785.8672,1029.75,1775.8672,1025.75,1779.8672" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[08c1f7dbb91d5a41de975f9183d36892]
@startuml activitydiagram
skinparam DefaultTextAlignment center
start
:Create list of tables: 
"table_names";
:Create list of access groups : 
"org_list";
:Load user data and Create dictionary of pandas dataframes: 
"data";
:Filter "data" using primary and foreign key constraints 
into new dictionary of dataframes: 
"new_df_dict";
:Create a list of dataframes: 
"access_list";
:Load user schema into a Pandas dataframe;
:Convert schema dataframe into wide table structure;
:Create columns for sharing properties for organizations: 
"shared_with_label" where label = "name of organization" 
with True/ False values;
:Create columns for sharing properties for organizations: 
"filter_label" where label = "name of organization 
with True/ False values";
:Create a list of dictionaries from the schema 
specifying rules to filter;
:Filter data based on schema;
if () then (schema['direction'] = 'column')
:Filter columns/ variables for each organization;
:Create a list keep_var that contains lists of variables 
to keep for each table & each organization
within nested lists;
:Loop over each organization in "org_list";
:Loop over each tables in "table_names" list;
:Create an temporary list for each table 
consisting of it's variables;
if () then ("share_with_label" = True)
:Keep the variable  inside 
keep_var list for the 
current table & organization in itteration;
elseif () then ("shared_with_label" = False and schema['filter_label'] = 'ALL' and direction = 'column')
:Remove the variable from 
keep_var list for the 
current table & organization in itteration;
else () then ("shared_with_label" = False and schema['variableName'] = 'ALL')
:Remove all the variable from 
keep_var list for the 
current table & organization in itteration;
endif;
:Loop over the nested lists 
for each organization inside:
"access_list";
:Filter dataframes in `access_list` with 
keep_var variables that 
corresponds to each dataframe;
else () then (schema['direction'] = 'row')
:Filter rows in the data for each organization;
:Loop over each organization in "org_list";
:Loop over the nested lists for each organization inside "access_list";
:Loop over each tables in "table_names" list;
:Loop over the dataframes inside the nested lists in "access_list";
if () then ("filter_label"= [a,b])
:Remove all values for the variable 
within the range between a and b 
including both a and b;
elseif () then ("filter_label" = (a,b])
:Remove all values for the variable 
within the range between a and b 
excluding a and including b;
elseif () then ("filter_label" = [a,b))
:Remove all values for the variable 
within the range between a and b 
including a and excluding b;
elseif () then ("filter_label" = (a,b))
:Remove all values 
for the variable within the range 
between a and b excluding both a and b;
endif
endif;
:Return list of filtered dataframes 
for each organization: 
"filtered_list";
:Return a text document with description;
stop
@enduml

PlantUML version 1.2021.7(Sun May 23 08:40:07 EDT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: CA
--></g></svg>